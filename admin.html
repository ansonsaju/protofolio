<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --dark: #1f2937;
            --light: #f9fafb;
            --gray: #6b7280;
            --danger: #dc2626;
            --success: #059669;
            --warning: #d97706;
            --transition: all 0.3s ease-in-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Header */
        .admin-header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: var(--primary);
            color: white;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            text-decoration: none;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--gray);
        }

        .btn-secondary:hover {
            background-color: #4b5563;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #b91c1c;
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #047857;
        }

        /* Main Content */
        .admin-main {
            padding: 2rem 0;
        }

        .admin-header-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .admin-title {
            font-size: 2rem;
            font-weight: 700;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .stat-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background-color: rgba(37, 99, 235, 0.1);
            color: var(--primary);
            border-radius: 10px;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Blog Form */
        .blog-form-container {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 3rem;
            display: none;
        }

        .blog-form-container.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        textarea.form-control {
            resize: vertical;
            min-height: 200px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .image-upload {
            position: relative;
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .image-upload:hover {
            border-color: var(--primary);
            background-color: rgba(37, 99, 235, 0.05);
        }

        .image-upload input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .image-preview {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
            margin-top: 1rem;
        }

        /* Blog List */
        .blog-list-container {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .search-filter {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
        }

        .filter-select {
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background-color: white;
        }

        .blog-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .blog-table th,
        .blog-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .blog-table th {
            background-color: #f9fafb;
            font-weight: 600;
            color: var(--dark);
        }

        .blog-table tbody tr:hover {
            background-color: #f9fafb;
        }

        .blog-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-published {
            background-color: #dcfce7;
            color: #166534;
        }

        .status-draft {
            background-color: #fef3c7;
            color: #92400e;
        }

        .blog-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .btn-icon {
            padding: 0.5rem;
            width: 40px;
            height: 40px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal-header {
            margin-bottom: 1rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1001;
            transform: translateX(400px);
            transition: var(--transition);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-success {
            background-color: var(--success);
        }

        .toast-error {
            background-color: var(--danger);
        }

        .toast-info {
            background-color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .admin-header-section {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .search-filter {
                flex-direction: column;
            }

            .blog-table {
                font-size: 0.875rem;
            }

            .blog-table th,
            .blog-table td {
                padding: 0.5rem;
            }

            .blog-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .nav-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="admin-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">Blog Admin</div>
                <div class="nav-buttons">
                    <a href="home.html" class="btn btn-secondary">
                        <i class="fas fa-home"></i> View Site
                    </a>
                    <button id="addBlogBtn" class="btn">
                        <i class="fas fa-plus"></i> Add New Blog
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="admin-main">
        <div class="container">
            <!-- Stats Section -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-blog"></i>
                    </div>
                    <div class="stat-number" id="totalBlogs">0</div>
                    <div class="stat-label">Total Blogs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="stat-number" id="publishedBlogs">0</div>
                    <div class="stat-label">Published</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-edit"></i>
                    </div>
                    <div class="stat-number" id="draftBlogs">0</div>
                    <div class="stat-label">Drafts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-calendar"></i>
                    </div>
                    <div class="stat-number" id="thisMonthBlogs">0</div>
                    <div class="stat-label">This Month</div>
                </div>
            </div>

            <!-- Blog Form -->
            <div id="blogFormContainer" class="blog-form-container">
                <div class="admin-header-section">
                    <h2 id="formTitle">Add New Blog Post</h2>
                    <button id="cancelFormBtn" class="btn btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
                
                <form id="blogForm">
                    <input type="hidden" id="editBlogId" value="">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="blogTitle">Title *</label>
                            <input type="text" id="blogTitle" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="blogCategory">Category *</label>
                            <select id="blogCategory" class="form-control" required>
                                <option value="">Select Category</option>
                                <option value="design">Design</option>
                                <option value="development">Development</option>
                                <option value="business">Business</option>
                                <option value="tutorials">Tutorials</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="blogExcerpt">Excerpt *</label>
                        <textarea id="blogExcerpt" class="form-control" rows="3" placeholder="Brief description of the blog post..." required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="blogContent">Content *</label>
                        <textarea id="blogContent" class="form-control" rows="10" placeholder="Write your blog content here..." required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="blogTags">Tags</label>
                            <input type="text" id="blogTags" class="form-control" placeholder="design, web, ui (comma separated)">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="blogStatus">Status *</label>
                            <select id="blogStatus" class="form-control" required>
                                <option value="draft">Draft</option>
                                <option value="published">Published</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Featured Image</label>
                        <div class="image-upload" id="imageUpload">
                            <input type="file" id="blogImage" accept="image/*">
                            <div class="upload-text">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 1rem; display: block;"></i>
                                <p>Click to upload or drag and drop</p>
                                <small>PNG, JPG, GIF up to 10MB</small>
                            </div>
                            <img id="imagePreview" class="image-preview" style="display: none;">
                        </div>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> Save Blog Post
                        </button>
                        <button type="button" id="previewBtn" class="btn btn-secondary">
                            <i class="fas fa-eye"></i> Preview
                        </button>
                    </div>
                </form>
            </div>

            <!-- Blog List -->
            <div class="blog-list-container">
                <div class="admin-header-section">
                    <h2>Manage Blog Posts</h2>
                    <div class="search-filter">
                        <input type="text" id="searchBlogs" class="form-control search-input" placeholder="Search blogs...">
                        <select id="filterCategory" class="filter-select">
                            <option value="">All Categories</option>
                            <option value="design">Design</option>
                            <option value="development">Development</option>
                            <option value="business">Business</option>
                            <option value="tutorials">Tutorials</option>
                        </select>
                        <select id="filterStatus" class="filter-select">
                            <option value="">All Status</option>
                            <option value="published">Published</option>
                            <option value="draft">Draft</option>
                        </select>
                    </div>
                </div>

                <div style="overflow-x: auto;">
                    <table class="blog-table">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="blogTableBody">
                            <!-- Blog posts will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Confirm Delete</h3>
                <p>Are you sure you want to delete this blog post? This action cannot be undone.</p>
            </div>
            <div class="modal-actions">
                <button id="confirmDelete" class="btn btn-danger">Delete</button>
                <button id="cancelDelete" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // Blog Management System
        class BlogManager {
            constructor() {
                this.blogs = JSON.parse(localStorage.getItem('blogPosts')) || [];
                this.currentEditId = null;
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadBlogs();
                this.updateStats();
            }

            bindEvents() {
                // Form events
                document.getElementById('addBlogBtn').addEventListener('click', () => this.showForm());
                document.getElementById('cancelFormBtn').addEventListener('click', () => this.hideForm());
                document.getElementById('blogForm').addEventListener('submit', (e) => this.saveBlog(e));
                document.getElementById('blogImage').addEventListener('change', (e) => this.previewImage(e));
                
                // Search and filter
                document.getElementById('searchBlogs').addEventListener('input', (e) => this.filterBlogs());
                document.getElementById('filterCategory').addEventListener('change', () => this.filterBlogs());
                document.getElementById('filterStatus').addEventListener('change', () => this.filterBlogs());
                
                // Modal events
                document.getElementById('cancelDelete').addEventListener('click', () => this.hideDeleteModal());
                document.getElementById('confirmDelete').addEventListener('click', () => this.confirmDelete());
            }

            showForm(blog = null) {
                const container = document.getElementById('blogFormContainer');
                const title = document.getElementById('formTitle');
                
                if (blog) {
                    title.textContent = 'Edit Blog Post';
                    this.populateForm(blog);
                } else {
                    title.textContent = 'Add New Blog Post';
                    this.resetForm();
                }
                
                container.classList.add('active');
                container.scrollIntoView({ behavior: 'smooth' });
            }

            hideForm() {
                document.getElementById('blogFormContainer').classList.remove('active');
                this.resetForm();
            }

            resetForm() {
                document.getElementById('blogForm').reset();
                document.getElementById('editBlogId').value = '';
                document.getElementById('imagePreview').style.display = 'none';
                this.currentEditId = null;
            }

            populateForm(blog) {
                document.getElementById('editBlogId').value = blog.id;
                document.getElementById('blogTitle').value = blog.title;
                document.getElementById('blogCategory').value = blog.category;
                document.getElementById('blogExcerpt').value = blog.excerpt;
                document.getElementById('blogContent').value = blog.content;
                document.getElementById('blogTags').value = blog.tags ? blog.tags.join(', ') : '';
                document.getElementById('blogStatus').value = blog.status;
                
                if (blog.image) {
                    const preview = document.getElementById('imagePreview');
                    preview.src = blog.image;
                    preview.style.display = 'block';
                }
                
                this.currentEditId = blog.id;
            }

            previewImage(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const preview = document.getElementById('imagePreview');
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            }

            saveBlog(event) {
                event.preventDefault();
                
                const formData = new FormData(event.target);
                const imageFile = document.getElementById('blogImage').files[0];
                
                const blogData = {
                    id: this.currentEditId || this.generateId(),
                    title: document.getElementById('blogTitle').value,
                    category: document.getElementById('blogCategory').value,
                    excerpt: document.getElementById('blogExcerpt').value,
                    content: document.getElementById('blogContent').value,
                    tags: document.getElementById('blogTags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
                    status: document.getElementById('blogStatus').value,
                    date: this.currentEditId ? this.blogs.find(b => b.id === this.currentEditId).date : new Date().toISOString(),
                    lastModified: new Date().toISOString(),
                    image: document.getElementById('imagePreview').src || `https://picsum.photos/400/250?random=${Math.floor(Math.random() * 1000)}`
                };

                if (this.currentEditId) {
                    // Update existing blog
                    const index = this.blogs.findIndex(b => b.id === this.currentEditId);
                    this.blogs[index] = blogData;
                    this.showToast('Blog post updated successfully!', 'success');
                } else {
                    // Add new blog
                    this.blogs.unshift(blogData);
                    this.showToast('Blog post created successfully!', 'success');
                }

                this.saveToStorage();
                this.loadBlogs();
                this.updateStats();
                this.hideForm();
            }

            deleteBlog(id) {
                this.currentDeleteId = id;
                document.getElementById('deleteModal').classList.add('active');
            }

            confirmDelete() {
                if (this.currentDeleteId) {
                    this.blogs = this.blogs.filter(blog => blog.id !== this.currentDeleteId);
                    this.saveToStorage();
                    this.loadBlogs();
                    this.updateStats();
                    this.hideDeleteModal();
                    this.showToast('Blog post deleted successfully!', 'success');
                }
            }

            hideDeleteModal() {
                document.getElementById('deleteModal').classList.remove('active');
                this.currentDeleteId = null;
            }

            loadBlogs() {
                const tbody = document.getElementById('blogTableBody');
                tbody.innerHTML = '';

                const filteredBlogs = this.getFilteredBlogs();

                if (filteredBlogs.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 2rem; color: var(--gray);">
                                No blog posts found
                            </td>
                        </tr>
                    `;
                    return;
                }

                filteredBlogs.forEach(blog => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>
                            <div style="max-width: 250px;">
                                <h4 style="margin-bottom: 0.25rem;">${blog.title}</h4>
                                <small style="color: var(--gray);">${blog.excerpt.substring(0, 100)}...</small>
                            </div>
                        </td>
                        <td>
                            <span class="blog-category" style="text-transform: capitalize;">${blog.category}</span>
                        </td>
                        <td>
                            <span class="blog-status status-${blog.status}">${blog.status}</span>
                        </td>
                        <td>
                            <div>
                                <div>${new Date(blog.date).toLocaleDateString()}</div>
                                <small style="color: var(--gray);">${new Date(blog.date).toLocaleTimeString()}</small>
                            </div>
                        </td>
                        <td>
                            <div class="blog-actions">
                                <button class="btn btn-sm btn-primary" onclick="blogManager.editBlog('${blog.id}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="blogManager.deleteBlog('${blog.id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }

            editBlog(id) {
                const blog = this.blogs.find(b => b.id === id);
                if (blog) {
                    this.showForm(blog);
                }
            }

            getFilteredBlogs() {
                const search = document.getElementById('searchBlogs').value.toLowerCase();
                const categoryFilter = document.getElementById('filterCategory').value;
                const statusFilter = document.getElementById('filterStatus').value;

                return this.blogs.filter(blog => {
                    const matchesSearch = blog.title.toLowerCase().includes(search) || 
                                        blog.excerpt.toLowerCase().includes(search);
                    const matchesCategory = !categoryFilter || blog.category === categoryFilter;
                    const matchesStatus = !statusFilter || blog.status === statusFilter;
                    
                    return matchesSearch && matchesCategory && matchesStatus;
                });
            }

            filterBlogs() {
                this.loadBlogs();
            }

            updateStats() {
                const totalBlogs = this.blogs.length;
                const publishedBlogs = this.blogs.filter(b => b.status === 'published').length;
                const draftBlogs = this.blogs.filter(b => b.status === 'draft').length;
                
                const thisMonth = new Date();
                const firstDayOfMonth = new Date(thisMonth.getFullYear(), thisMonth.getMonth(), 1);
                const thisMonthBlogs = this.blogs.filter(b => new Date(b.date) >= firstDayOfMonth).length;

                document.getElementById('totalBlogs').textContent = totalBlogs;
                document.getElementById('publishedBlogs').textContent = publishedBlogs;
                document.getElementById('draftBlogs').textContent = draftBlogs;
                document.getElementById('thisMonthBlogs').textContent = thisMonthBlogs;
            }

            saveToStorage() {
                localStorage.setItem('blogPosts', JSON.stringify(this.blogs));
            }

            generateId() {
                return 'blog_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }

            showToast(message, type = 'info') {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.className = `toast toast-${type} show`;
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            // Initialize with sample data if empty
            initializeSampleData() {
                if (this.blogs.length === 0) {
                    const sampleBlogs = [
                        {
                            id: 'blog_1',
                            title: 'The Future of Web Design',
                            category: 'design',
                            excerpt: 'Exploring upcoming trends and technologies that will shape the future of web design.',
                            content: 'Web design is constantly evolving, and staying ahead of the curve is crucial for designers and developers. In this post, we explore the latest trends and technologies that are shaping the future of web design...',
                            tags: ['design', 'web', 'trends'],
                            status: 'published',
                            date: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                            lastModified: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                            image: 'https://picsum.photos/400/250?random=1'
                        },
                        {
                            id: 'blog_2',
                            title: 'JavaScript ES2024 Features',
                            category: 'development',
                            excerpt: 'A comprehensive look at the new JavaScript features introduced in ES2024.',
                            content: 'JavaScript continues to evolve with exciting new features. ES2024 brings several improvements that enhance developer productivity and code quality. Let\'s dive into the most important additions...',
                            tags: ['javascript', 'es2024', 'programming'],
                            status: 'published',
                            date: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
                            lastModified: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
                            image: 'https://picsum.photos/400/250?random=2'
                        },
                        {
                            id: 'blog_3',
                            title: 'Building Scalable React Applications',
                            category: 'tutorials',
                            excerpt: 'Learn best practices for building large-scale React applications that are maintainable and performant.',
                            content: 'Building scalable React applications requires careful planning and adherence to best practices. In this comprehensive tutorial, we\'ll explore architecture patterns, state management strategies, and performance optimization techniques...',
                            tags: ['react', 'scalability', 'architecture'],
                            status: 'draft',
                            date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                            lastModified: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
                            image: 'https://picsum.photos/400/250?random=3'
                        },
                        {
                            id: 'blog_4',
                            title: 'Digital Marketing Strategies for 2024',
                            category: 'business',
                            excerpt: 'Effective digital marketing strategies that will help your business grow in 2024.',
                            content: 'The digital marketing landscape is constantly changing. To stay competitive in 2024, businesses need to adapt their strategies and embrace new technologies. Here are the key strategies that will drive success...',
                            tags: ['marketing', 'business', 'strategy'],
                            status: 'published',
                            date: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
                            lastModified: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
                            image: 'https://picsum.photos/400/250?random=4'
                        },
                        {
                            id: 'blog_5',
                            title: 'CSS Grid vs Flexbox: When to Use What',
                            category: 'design',
                            excerpt: 'A detailed comparison of CSS Grid and Flexbox to help you choose the right layout method.',
                            content: 'CSS Grid and Flexbox are both powerful layout systems, but they serve different purposes. Understanding when to use each one is crucial for creating efficient and maintainable layouts...',
                            tags: ['css', 'grid', 'flexbox', 'layout'],
                            status: 'draft',
                            date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                            lastModified: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
                            image: 'https://picsum.photos/400/250?random=5'
                        }
                    ];
                    
                    this.blogs = sampleBlogs;
                    this.saveToStorage();
                }
            }
        }

        // Initialize the blog manager
        const blogManager = new BlogManager();
        
        // Initialize sample data on first load
        document.addEventListener('DOMContentLoaded', () => {
            blogManager.initializeSampleData();
            blogManager.loadBlogs();
            blogManager.updateStats();
        });

        // Additional utility functions
        function formatDate(dateString) {
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Handle drag and drop for image upload
        const imageUpload = document.getElementById('imageUpload');
        const imageInput = document.getElementById('blogImage');

        imageUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            imageUpload.style.backgroundColor = 'rgba(37, 99, 235, 0.1)';
        });

        imageUpload.addEventListener('dragleave', () => {
            imageUpload.style.backgroundColor = '';
        });

        imageUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            imageUpload.style.backgroundColor = '';
            
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type.startsWith('image/')) {
                imageInput.files = files;
                blogManager.previewImage({ target: { files: files } });
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + N for new blog
            if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                e.preventDefault();
                blogManager.showForm();
            }
            
            // Escape to close modals/forms
            if (e.key === 'Escape') {
                const deleteModal = document.getElementById('deleteModal');
                const formContainer = document.getElementById('blogFormContainer');
                
                if (deleteModal.classList.contains('active')) {
                    blogManager.hideDeleteModal();
                } else if (formContainer.classList.contains('active')) {
                    blogManager.hideForm();
                }
            }
        });

        // Auto-save draft functionality
        let autoSaveTimeout;
        const formInputs = ['blogTitle', 'blogContent', 'blogExcerpt'];

        formInputs.forEach(inputId => {
            document.getElementById(inputId).addEventListener('input', () => {
                clearTimeout(autoSaveTimeout);
                autoSaveTimeout = setTimeout(() => {
                    // Auto-save logic could be implemented here
                    console.log('Auto-saving draft...');
                }, 2000);
            });
        });

        // Export/Import functionality
        function exportBlogs() {
            const dataStr = JSON.stringify(blogManager.blogs, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'blog_posts_export.json';
            link.click();
            URL.revokeObjectURL(url);
        }

        function importBlogs(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importedBlogs = JSON.parse(e.target.result);
                        if (Array.isArray(importedBlogs)) {
                            blogManager.blogs = importedBlogs;
                            blogManager.saveToStorage();
                            blogManager.loadBlogs();
                            blogManager.updateStats();
                            blogManager.showToast('Blogs imported successfully!', 'success');
                        }
                    } catch (error) {
                        blogManager.showToast('Error importing blogs. Invalid file format.', 'error');
                    }
                };
                reader.readAsText(file);
            }
        }

        // Search functionality enhancement
        function highlightSearchTerm(text, searchTerm) {
            if (!searchTerm) return text;
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<mark>$1</mark>');
        }

        // Word count for content
        function updateWordCount() {
            const content = document.getElementById('blogContent').value;
            const wordCount = content.trim().split(/\s+/).filter(word => word.length > 0).length;
            
            let wordCountElement = document.getElementById('wordCount');
            if (!wordCountElement) {
                wordCountElement = document.createElement('small');
                wordCountElement.id = 'wordCount';
                wordCountElement.style.color = 'var(--gray)';
                document.getElementById('blogContent').parentNode.appendChild(wordCountElement);
            }
            
            wordCountElement.textContent = `${wordCount} words`;
        }

        document.getElementById('blogContent').addEventListener('input', updateWordCount);

        // Slug generation from title
        function generateSlug(title) {
            return title
                .toLowerCase()
                .replace(/[^a-z0-9 -]/g, '')
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-')
                .trim('-');
        }

        document.getElementById('blogTitle').addEventListener('input', (e) => {
            const title = e.target.value;
            const slug = generateSlug(title);
            
            let slugElement = document.getElementById('blogSlug');
            if (!slugElement) {
                slugElement = document.createElement('small');
                slugElement.id = 'blogSlug';
                slugElement.style.color = 'var(--gray)';
                e.target.parentNode.appendChild(slugElement);
            }
            
            slugElement.textContent = slug ? `Slug: ${slug}` : '';
        });
    </script>
</body>
</html>